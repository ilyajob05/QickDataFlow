language: cpp
compiler: gcc

dist: focal
addons:
  apt:
    sources:
      - ubuntu-toolchain-r-test
    packages:
      - g++-7
      - valgrind

before_install:
    # Combine global build options with OS/compiler-dependent options

install:
    - echo ${PATH}
    - echo ${CXX}
    - ${CXX} --version
    - ${CXX} -v
    - sudo pip install codecov
    - sudo apt-get install libgtest-dev
    - cmake -DCMAKE_BUILD_TYPE=Release /usr/src/gtest
    - cmake --build .
    - sudo mv lib*.a /usr/lib
    - rm CMakeCache.txt cmake_install.cmake Makefile
    - rm -rf CMakeFiles
    - echo ${PATH}
    - echo ${CXX}
    - ${CXX} --version
    - ${CXX} -v
    - cmake --version

# before_script:

script:
    - export CC=gcc-7
    - export CXX=g++-7
    - cmake --version
    - mkdir build
    - cd build
    - cmake -DBUILD_TESTS=ON ..
    - make
    - make test

after_success:
    # - codecov -t c376990f-2ad6-4f7b-bbdb-5378a52e295c -X gcov
